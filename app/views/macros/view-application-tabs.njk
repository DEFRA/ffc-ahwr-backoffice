{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}

{% macro viewApplicationTabs(model, vetVisit, claimed, payment, status) %}
  {% set applicationHtml %}
  <h2 class="govuk-heading-l">{{ status }}</h2>
  {{ govukTable(model.applicationData) }}
  {% endset -%}

  {% set claimHtml %}
  {% if (status == "In check") %}
    <h2 class="govuk-heading-l">Claimed</h2>
    {{ govukTable(model.claimData) }}
  {% elif(status == "Rejected") %}
    <h2 class="govuk-heading-l">Not eligible to claim</h2>
    {{ govukTable(model.claimData) }}
  {% elif(status == "Agreed") %}
    <h2 class="govuk-heading-l">Not claimed yet</h2>
  {% elif(status == "Ready to pay") %}
    <h2 class="govuk-heading-l">Claim Approved</h2>
    {{ govukTable(model.claimData) }}
  {% elif claimed %}
    <h2 class="govuk-heading-l">Claimed</h2>
    {{ govukTable(model.claimData) }}
  {% else %}
    <h2 class="govuk-heading-l">Not eligible to claim</h2>
  {% endif %}
  {% endset -%}

  {% set historyHtml %}
  <h2 class="govuk-heading-l">History</h2>
  {{ govukTable({
    head: model.historyData.header,
    rows: model.historyData.rows
  }) }}
  {% endset -%}

  {{ govukTabs({
    items: [
      {
        label: "Agreement",
        id: "application",
        panel: {
          html: applicationHtml
        }
      },
      {
        label: "Claim",
        id: "claim",
        panel: {
          html: claimHtml
        }
      },
      {
        label: "History",
        id: "history",
        panel: {
          html: historyHtml
        }
      }
    ]
  }) }}
{% endmacro %}