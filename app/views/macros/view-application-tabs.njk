{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}

{% macro viewApplicationTabs(model, vetVisit, claimed, payment, status) %}
  {% set applicationHtml %}
    <h2 class="govuk-heading-l">{{ status }}</h2>
    {{ govukTable(model.applicationData) }}
  {% endset -%}

  {% set vetReviewHtml %}
    {% if vetVisit %}
      <h2 class="govuk-heading-l">Data inputted</h2>
      {{ govukTable(model.vetVisitData) }}
    {% else %}
      <h2 class="govuk-heading-l">Not yet reviewed</h2>
    {% endif %}
  {% endset -%}

  {% set claimHtml %}
    {% if claimed %}
      <h2 class="govuk-heading-l">Selected for fraud check</h2>
      {{ govukTable(model.claimData) }}
    {% else %}
      <h2 class="govuk-heading-l">Not yet able to claim</h2>
    {% endif %}
  {% endset -%}

  {% set paymentHtml %}
    {% if payment %}
      <h2 class="govuk-heading-l">Payment information</h2>
      {{ govukTable(model.paymentData) }}
    {% else %}
      <h2 class="govuk-heading-l">Not yet paid</h2>
    {% endif %}
  {% endset -%}

  {{ govukTabs({
    items: [
      {
        label: "Application",
        id: "application",
        panel: {
          html: applicationHtml
        }
      },
      {
        label: "Vet Review",
        id: "vet-review",
        panel: {
          html: vetReviewHtml
        }
      },
      {
        label: "Claim",
        id: "claim",
        panel: {
          html: claimHtml
        }
      },
      {
        label: "Payment",
        id: "payment",
        panel: {
          html: paymentHtml
        }
      }
    ]
  }) }}
{% endmacro %}
