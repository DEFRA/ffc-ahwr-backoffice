{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}

{% macro viewApplicationTabs(model, vetVisit, claimed, payment, status, authorisePayment, rejectPayment) %}
  {% set applicationHtml %}

  {% if authorisePayment %}
    <h2 class="govuk-heading-l">Recommend to pay</h2>
  {% elif rejectPayment%}
    <h2 class="govuk-heading-l">Recommend to reject</h2>
  {% else %}
    <h2 class="govuk-heading-l">{{ status }}</h2>
  {% endif %}
  {{ govukTable(model.applicationData) }}
  {% endset -%}

  {% set claimHtml %}
  <h2 class="govuk-heading-l">{{ status }}</h2>
  {{ govukTable(model.claimData) }}
  {% endset -%}

  {% set historyHtml %}
  <h2 class="govuk-heading-l">History</h2>
  {{ govukTable({
    head: model.historyData.header,
    rows: model.historyData.rows
  }) }}
  {% endset -%}

  {{ govukTabs({
    items: [
      {
        label: "Agreement",
        id: "application",
        panel: {
          html: applicationHtml
        }
      },
      {
        label: "Claim",
        id: "claim",
        panel: {
          html: claimHtml
        }
      },
      {
        label: "History",
        id: "history",
        panel: {
          html: historyHtml
        }
      }
    ]
  }) }}
{% endmacro %}